{% extends "topic/base.html" %}
{% block title %}论坛主页{% endblock%}
{% block main %}

<link rel="stylesheet" href="%E8%AE%BE%E7%BD%AE%E9%A1%B5%E9%9D%A2_files/index.css" media="all">
<link rel="stylesheet" href="/static/css/setting.css">
<link rel="stylesheet" href="/static/css/style.css">


<div id="main">

<div id="sidebars">
    <div class="panel">
        <div class="header">
            <span class="col_fade">个人信息</span>
        </div>
        <div class="inner no-padding">
            <div id="namecard">
                <div class="cell">
                    <a class="user_avatar pull-left" href="https://cnodejs.org/user/dinkdinkdink">
                        <img src="{{ user.image }}">
                    </a>
                    <span class="reply_count pull-left">
                        <span class="count_of_replies">
                          {{ user.username }}
                        </span>
                        <div class="count_of_visits">
                          这家伙很懒什么也没留下
                        </div>
                      </span>
                </div>
            </div>
        </div>
        <div class="inner">
            <a href="{{ url_for('topic.new') }}" class="create_topic_btn">
                <span class="span-success">发布话题</span>
            </a>
        </div>
    </div>
</div>

<div id="content">
  <div class="panel">
    <div class="header">
      <ul class="breadcrumb">
        <li><a href="https://cnodejs.org/">主页</a><span class="divider">/</span></li>
        <li class="active">设置</li>
      </ul>
    </div>
    <div class="inner">
      
      
      <form id="setting_form" class="form-horizontal" action="/setting" method="post">
        <div class="control-group">
          <label class="control-label" for="name">用户名</label>

          <div class="controls">
            <input class="input-xlarge readonly" id="name" name="name" size="30" type="text"  value="{{ user.username }}">
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="signature">个性签名</label>

          <div class="controls">
            <textarea class="input-xlarge" id="signature" name="signature" size="30"></textarea>
          </div>
        </div>
        <div class="form-actions">
          <input type="submit" class="span-primary submit_btn" data-loading-text="保存中.." value="保存设置">
        </div>
      </form>
    </div>
  </div>

  <div class="panel">
    <div class="header">
      <span class="col_fade">更改密码</span>
    </div>
    <div class="inner">
      <form id="change_pass_form" class="form-horizontal" action="/setting" method="post">
        <div class="control-group">
          <label class="control-label" for="old_pass">当前密码</label>

          <div class="controls">
            <input class="input-xlarge" type="password" id="old_pass" name="old_pass" size="30">
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="new_pass">新密码</label>

          <div class="controls">
            <input class="input-xlarge" type="password" id="new_pass" name="new_pass" size="30">
          </div>
        </div>
        <input type="hidden" id="action" name="action" value="change_password">
        <input type="hidden" name="_csrf" value="1J2smg1N-zPxXr54OvDucC8uNtDKD36moTF0">

        <div class="form-actions">
          <input type="submit" class="span-primary submit_btn" data-loading-text="更改中.." value="更改密码">
        </div>
      </form>
    </div>
  </div>

    <div class="panel">
    <div class="header">
      <span class="col_fade">上传头像</span>
    </div>
    <div class="inner">
      <form id="change_pass_form" class="form-horizontal" action="/setting" method="post">
        <div class="control-group">
            <form method="post" action="{{ url_for('index.avatar_add')}}" enctype="multipart/form-data">
                <input type="file" name="avatar">
                <button type="submit">上传头像</button>
            </form>
        </div>
      </form>
    </div>
  </div>
</div>
</div>

<script>
    const e = function (selector) {
        return document.querySelector(selector)
    }

    const change_name = function () {
        let name = e('#name').value


    }
</script>
{% endblock%}